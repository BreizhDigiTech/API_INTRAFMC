# Sch√©ma GraphQL pour le module Cart

type Cart {
  id: ID!
  user_id: ID!
  product_id: ID!
  quantity: Int!
  user: User
  product: ProductCBD
  created_at: String
  updated_at: String
}

type CartSummary {
  total: Float!
  itemCount: Int!
}

input AddToCartInput {
  product_id: ID!
  quantity: Int!
}

input UpdateCartItemInput {
  quantity: Int!
}

extend type Query {
  myCart: [Cart!]! @guard @field(resolver: "App\\Modules\\Cart\\GraphQL\\Queries\\CartQuery@myCart")
  cartTotal: CartSummary @guard @field(resolver: "App\\Modules\\Cart\\GraphQL\\Queries\\CartQuery@cartTotal")
}

extend type Mutation {
  addToCart(input: AddToCartInput!): Cart
    @guard
    @field(resolver: "App\\Modules\\Cart\\GraphQL\\Mutations\\CartMutator@addToCart")

  updateCartItem(id: ID!, input: UpdateCartItemInput!): Cart
    @guard
    @field(resolver: "App\\Modules\\Cart\\GraphQL\\Mutations\\CartMutator@updateCartItem")

  removeFromCart(id: ID!): DeleteResponse
    @guard
    @field(resolver: "App\\Modules\\Cart\\GraphQL\\Mutations\\CartMutator@removeFromCart")

  clearCart: DeleteResponse
    @guard
    @field(resolver: "App\\Modules\\Cart\\GraphQL\\Mutations\\CartMutator@clearCart")
}